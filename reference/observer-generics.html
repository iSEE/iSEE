<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generic for the panel observers — observer-generics • iSEE</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Generic for the panel observers — observer-generics"><meta property="og:description" content="The workhorse generic for defining the Shiny observers for a given panel, along with recommendations on its implementation."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">iSEE</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.15.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/basic.html">An introduction to the iSEE interface 
</a>
    </li>
    <li>
      <a href="../articles/bigdata.html">How to use iSEE with big data
</a>
    </li>
    <li>
      <a href="../articles/configure.html">Configuring iSEE apps
</a>
    </li>
    <li>
      <a href="../articles/custom.html">Deploying custom panels in the iSEE interface</a>
    </li>
    <li>
      <a href="../articles/ecm.html">Describing the ExperimentColorMap class</a>
    </li>
    <li>
      <a href="../articles/links.html">Sharing information across iSEE panels</a>
    </li>
    <li>
      <a href="../articles/voice.html">Controlling the iSEE interface using speech recognition</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/iSEE/iSEE/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generic for the panel observers</h1>
    <small class="dont-index">Source: <a href="https://github.com/iSEE/iSEE/blob/HEAD/R/AllGenerics.R" class="external-link"><code>R/AllGenerics.R</code></a></small>
    <div class="hidden name"><code>observer-generics.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The workhorse generic for defining the Shiny observers for a given panel, along with recommendations on its implementation.</p>
    </div>


    <div id="creating-parameter-observers">
    <h2>Creating parameter observers</h2>
    

<p>In <code>.createObservers(x, se, input, session, pObjects, rObjects)</code>, the required arguments are:</p><ul><li><p><code>x</code>, an instance of a <a href="Panel-class.html">Panel</a> class.</p></li>
<li><p><code>se</code>, a SummarizedExperiment object containing the current dataset.
This can be assumed to have been produced by running <code><a href="setup-generics.html">.refineParameters</a>(x, se)</code>.</p></li>
<li><p><code>input</code>, the Shiny input object from the server function.</p></li>
<li><p><code>session</code>, the Shiny session object from the server function.</p></li>
<li><p><code>pObjects</code>, an environment containing global parameters generated in the <code><a href="iSEE.html">iSEE</a></code> app.</p></li>
<li><p><code>rObjects</code>, a reactive list of values generated in the <code><a href="iSEE.html">iSEE</a></code> app.</p></li>
</ul><p>Methods for this generic are expected to set up all observers required to respond to changes in the interface elements set up by <code><a href="interface-generics.html">.defineInterface</a></code>.
Recall that each interface element has an ID of the form of <code>PANEL_SLOT</code>, where <code>PANEL</code> is the panel name (from <code><a href="getEncodedName.html">.getEncodedName</a></code>) and <code>SLOT</code> is the name of the slot modified by the interface element.
Thus, observers should respond to changes in those elements in <code>input</code>.
The return value of this generic is not used; only the side-effect of observer set-up is relevant.</p>
<p>It is the developer's responsibility to call <code><a href="https://rdrr.io/r/methods/NextMethod.html" class="external-link">callNextMethod</a></code> to set up the observers required by the parent class.
This is best done by calling <code><a href="https://rdrr.io/r/methods/NextMethod.html" class="external-link">callNextMethod</a></code> at the top of the method before defining up additional observers.
Each parent class should implement observers for its slots, so it is usually only necessary to implement observers for any newly added slots in a particular class.</p>
    </div>
    <div id="modifying-the-memory">
    <h2>Modifying the memory</h2>
    

<p>Consider an observer for an interface element that modifies a slot of <code>x</code>.
The code within this observer is expected to modify the “memory” of the app state in <code>pObjects</code>, via:</p><div class="sourceCode"><pre><code><span></span>
<span><span class="va">new_value</span> <span class="op">&lt;-</span> <span class="va">input</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">PANEL</span>, <span class="st">"_"</span>, <span class="va">SLOT</span><span class="op">)</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">pObjects</span><span class="op">$</span><span class="va">memory</span><span class="op">[[</span><span class="va">PANEL</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="va">SLOT</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">new_value</span></span></code></pre></div>

<p>This enables <span class="pkg">iSEE</span> to keep a record of the current state of the application.
In fact, any changes must go through <code>pObjects$memory</code> before they change the output in <code><a href="output-generics.html">.renderOutput</a></code>;
there is no direct interaction between <code>input</code> and <code>output</code> in this framework.</p>
<p>We suggest using <code><a href="createProtectedParameterObservers.html">.createProtectedParameterObservers</a></code> and <code><a href="createProtectedParameterObservers.html">.createUnprotectedParameterObservers</a></code>, 
which create simple observers that update the memory in response to changes in the UI elements.
For handling selectize elements filled with server-side row/column names, we can use <code><a href="createCustomDimnamesModalObservers.html">.createCustomDimnamesModalObservers</a></code>.</p>
<p>Developers should not attempt to modify <code>x</code> in any observer expression.
This value does not have pass-by-reference semantics and any changes will not propagate to other parts of the application.
Rather, modifications should occur to the version of <code>x</code> in <code>pObjects$memory</code>, as described in the code chunk above.</p>
    </div>
    <div id="triggering-re-rendering">
    <h2>Triggering re-rendering</h2>
    

<p>To trigger re-rendering of an output, observers should call <code><a href="requestUpdate.html">.requestUpdate</a>(PANEL, rObjects)</code> where <code>PANEL</code> is the name of the current panel
This will request a re-rendering of the output with no additional side effects and is most useful for responding to aesthetic parameters.</p>
<p>In some cases, changes to some parameters may invalidate existing multiple selections, e.g., brushes and lassos are no longer valid if the variable on the axes are altered.
Observers responding to such changes should instead call <code><a href="requestUpdate.html">.requestCleanUpdate</a>(PANEL, pObjects, rObjects)</code>, which will destroy all existing selections in order to avoid misleading conclusions.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Aaron Lun</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Kevin Rue-Albrecht, Federico Marini, Charlotte Soneson, Aaron Lun.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

