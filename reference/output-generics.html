<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generics for Panel outputs — output-generics • iSEE</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Generics for Panel outputs — output-generics" />
<meta property="og:description" content="An overview of the generics for defining the panel outputs, along with recommendations on their implementation." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">iSEE</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.1.22</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/basic.html">An introduction to the `r Biocpkg("iSEE")` interface 
</a>
    </li>
    <li>
      <a href="../articles/bigdata.html">How to use `r Biocpkg("iSEE")` with big data
</a>
    </li>
    <li>
      <a href="../articles/configure.html">Configuring `r Biocpkg("iSEE")` apps
</a>
    </li>
    <li>
      <a href="../articles/custom.html">Deploying custom panels in the `iSEE` interface</a>
    </li>
    <li>
      <a href="../articles/ecm.html">Describing the `ExperimentColorMap` class</a>
    </li>
    <li>
      <a href="../articles/links.html">Sharing information across `r Biocpkg("iSEE")` panels
</a>
    </li>
    <li>
      <a href="../articles/voice.html">Controlling the `iSEE` interface using speech recognition</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/iSEE/iSEE/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generics for Panel outputs</h1>
    <small class="dont-index">Source: <a href='https://github.com/iSEE/iSEE/blob/master/R/AllGenerics.R'><code>R/AllGenerics.R</code></a></small>
    <div class="hidden name"><code>output-generics.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>An overview of the generics for defining the panel outputs, along with recommendations on their implementation.</p>
    </div>



    <h2 class="hasAnchor" id="defining-the-output-element"><a class="anchor" href="#defining-the-output-element"></a>Defining the output element</h2>

    

<p><code>.defineOutput(x)</code> defines the output element of the panel (e.g., a plot or table widget),
given an instance of a <a href='Panel-class.html'>Panel</a> subclass in <code>x</code>.</p>
<p>Methods for this generic are expected to return a HTML element containing the visual output of the panel, such as the return value of <code><a href='https://shiny.rstudio.com/reference/shiny/latest/plotOutput.html'>plotOutput</a></code> or <code><a href='https://shiny.rstudio.com/reference/shiny/latest/tableOutput.html'>dataTableOutput</a></code>.
This element will be shown in the <span class="pkg">iSEE</span> interface above the parameter boxes for <code>x</code>.
Multiple elements can be returned via a <code><a href='https://rdrr.io/pkg/htmltools/man/tag.html'>tagList</a></code>.</p>
<p>The IDs of the output elements are expected to be prefixed with the panel name from <code><a href='.fullName.html'>.getEncodedName</a>(x)</code> and an underscore, e.g., <code>"ReducedDimensionPlot1_someOutput"</code>.
One of the output elements may simply have the ID set to <code>PANEL</code> alone;
this is usually the case for simple panels with one primary output like a <a href='DotPlot-class.html'>DotPlot</a>.</p>
    <h2 class="hasAnchor" id="defining-the-rendered-output"><a class="anchor" href="#defining-the-rendered-output"></a>Defining the rendered output</h2>

    

<p><code>.renderOutput(x, se, ..., output, pObjects, rObjects)</code> will create an expression to render the panel's output.
The following arguments are required:</p><ul>
<li><p><code>x</code>, an instance of a <a href='Panel-class.html'>Panel</a> class.</p></li>
<li><p><code>se</code>, a SummarizedExperiment object containing the current dataset.</p></li>
<li><p><code>...</code>, further arguments that may be used by specific methods.</p></li>
<li><p><code>output</code>, the Shiny output object from the server function.</p></li>
<li><p><code>pObjects</code>, an environment containing global parameters generated in the <code><a href='iSEE.html'>iSEE</a></code> app.</p></li>
<li><p><code>rObjects</code>, a reactive list of values generated in the <code><a href='iSEE.html'>iSEE</a></code> app.</p></li>
</ul>

<p>It is expected to attach one or more reactive expressions to <code>output</code> to render the output element(s) defined by <code>.defineOutput</code>.
This is typically done by calling rendering functions like <code>.renderOutput</code> or the most appropriate equivalent for the panel's output. 
The return value of this generic is not used; only the side-effect of the output set-up is relevant.</p>
<p>The rendering expression inside the chosen rendering function is expected to:</p><ol>
<li><p>Call <code><a href='https://rdrr.io/r/base/force.html'>force(rObjects[[PANEL]])</a></code>, where <code>PANEL</code> is the output of <code><a href='.fullName.html'>.getEncodedName</a>(x)</code>.
This ensures that the output is rerendered upon requesting changes in <code><a href='.requestUpdate.html'>.requestUpdate</a></code>.</p></li>
<li><p>Call <code>.generateOutput</code> to generate the output content to be rendered.</p></li>
<li><p>Fill <code>pObjects$contents[[PANEL]]</code> with some content related to the displayed output that allows cross-referencing with single/multiple selection structures.
This will be used in other generics like <code><a href='multi-select-generics.html'>.multiSelectionCommands</a></code> and <code><a href='single-select-generics.html'>.singleSelectionValue</a></code> to determine the identity of the selected point(s).
As a result, it is only strictly necessary if the panel is a potential transmitter, as determined by the return value of <code><a href='multi-select-generics.html'>.multiSelectionDimension</a></code>.</p></li>
<li><p>Fill <code>pObjects$commands[[PANEL]]</code> with a character vector of commands required to produce the displayed output.
This should minimally include the commands required to generate <code>pObjects$contents[[PANEL]]</code>;
for plotting panels, the vector should also include code to create the plot.</p></li>
<li><p>Fill <code>pObjects$varname[[PANEL]]</code> with a string containing the R expression in <code>pObjects$commands[[PANEL]]</code> that holds the contents stored in <code>pObjects$contents[[PANEL]]</code>.
This is used for code reporting, and again, is only strictly necessary if the panel is a potential transmitter.</p></li>
</ol>

<p>We strongly recommend calling <code><a href='.retrieveOutput.html'>.retrieveOutput</a></code> within the rendering expression, which will automatically perform all of the tasks above, rather than calling <code>.generateOutput</code> manually.
This means that the only extra work required in the implementation of <code>.renderOutput</code> is to choose an appropriate rendering function to encapsulate the rendering expression and assign the output of that function to <code>output</code>.</p>
<p>Developers should not attempt to modify <code>x</code> in any rendering expression.
This does not have pass-by-reference semantics and any changes will not propagate to other parts of the application.
Similarly, the rendering expression should treat <code>pObjects$memory</code> as read-only.
Any adjustment of parameters should be handled elsewhere, e.g., by the observer expressions in <code><a href='observer-generics.html'>.createObservers</a></code>.</p>
    <h2 class="hasAnchor" id="generating-content"><a class="anchor" href="#generating-content"></a>Generating content</h2>

    

<p><code>.generateOutput(x, se, all_memory, all_contents)</code> actually generates the panel's output to be used in the rendering expression.
The following arguments are required:</p><ul>
<li><p><code>x</code>, an instance of a <a href='Panel-class.html'>Panel</a> class.</p></li>
<li><p><code>se</code>, a SummarizedExperiment object containing the current dataset.</p></li>
<li><p><code>all_memory</code>, a named list containing <a href='Panel-class.html'>Panel</a> objects parameterizing the current state of the app.</p></li>
<li><p><code>all_contents</code>, a named list containing the contents of each panel.</p></li>
</ul>

<p>Methods for this generic should return a list containing:</p><ul>
<li><p><code>contents</code>, some arbitrary content for the panel (usually a data.frame).
It should be of a structure that allows it to be cross-referenced against the output of <code><a href='multi-select-generics.html'>.multiSelectionActive</a></code> to determine the selected rows/columns.
This is used to ensure that the <code>pObjects$contents</code> of a panel is populated before attempting to render their children (i.e., those that receive a multiple selection from the current panel).</p></li>
<li><p><code>commands</code>, a list of character vectors of R commands that, when executed, produces the contents of the panel and any displayed output (e.g., a ggplot object).
Developers should write these commands as if the evaluation environment only contains the SummarizedExperiment <code>se</code> and ExperimentColorMap <code>colormap</code>.</p></li>
<li><p><code>varname</code>, a string specifying the name of the variable in <code>commands</code> used to generate <code>contents</code>.
This is used to fulfill code tracking obligations.</p></li>
</ul><p>The output list may contain any number of other fields that can be used by <code>.renderOutput</code> but are otherwise ignored.</p>
<p>We suggest implementing this method using <code><a href='https://rdrr.io/r/base/eval.html'>eval</a>(<a href='https://rdrr.io/r/base/parse.html'>parse</a>(text=...))</code> calls, which enables easy construction and evaluation of the commands and contents at the same time.
A convenient wrapper for this call is provided by the <code><a href='manage_commands.html'>.textEval</a></code> utility.</p>
<p>The <code>all_memory</code> and <code>all_contents</code> arguments are provided for the sole purpose of determining what multiple selections are being received by <code>x</code>.
We strongly recommend passing them onto <code><a href='.processMultiSelections.html'>.processMultiSelections</a></code> to do the heavy lifting.
It would be unusual and inadvisable to use these arguments for any other information sharing across panels.</p>
    <h2 class="hasAnchor" id="exporting-content"><a class="anchor" href="#exporting-content"></a>Exporting content</h2>

    

<p><code>.exportOutput(x, se, all_memory, all_contents)</code> converts the panel output into a downloadable form.
The following arguments are required:</p><ul>
<li><p><code>x</code>, an instance of a <a href='Panel-class.html'>Panel</a> class.</p></li>
<li><p><code>se</code>, a SummarizedExperiment object containing the current dataset.</p></li>
<li><p><code>all_memory</code>, a named list containing <a href='Panel-class.html'>Panel</a> objects parameterizing the current state of the app.</p></li>
<li><p><code>all_contents</code>, a named list containing the contents of each panel.</p></li>
</ul>

<p>Methods for this generic should generate appropriate files containing the content of <code>x</code>.
(For example, plots may create PDFs while tables may create CSV files.)
All files should be created in the working directory at the time of the function call, possibly in further subdirectories.
Each file name should be prefixed with the <code><a href='.fullName.html'>.getEncodedName</a></code>.
The method itself should return a character vector containing <em>relative</em> paths to all newly created files.</p>
<p>To implement this method, we suggest simply passing all arguments onto <code>.generateOutput</code> and then converting the output into an appropriate file.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Aaron Lun</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Kevin Rue-Albrecht, Federico Marini, Charlotte Soneson, Aaron Lun.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


